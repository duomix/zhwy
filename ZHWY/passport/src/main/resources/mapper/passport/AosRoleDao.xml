<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.aisino.passport.sys.dao.IAosRoleDao">

	<select id="findList" parameterType="AosRole" resultType="AosRole" >
		select 
				t.roleid, t.rolename, t.rolecode, t.identitytype, t.createdate, t.createby, t.available, t.remark
			from aos_role t 
			
			where 1 = 1  
			<if test="roleid != null and roleid !=''"> and 
				t.roleid = #{roleid}
			</if>
			<if test="rolename != null and rolename !=''"> and 
				t.rolename like  concat(concat('%',#{rolename}),'%')
			</if>
			<if test="rolecode != null and rolecode !=''"> and 
				t.rolecode = #{rolecode}
			</if>
			<if test="identitytype != null and identitytype !=''"> and 
				t.identitytype = ${identitytype}
			</if>
			<if test="createdate != null and createdate !=''"> and 
				t.createdate = #{createdate}
			</if>
			<if test="createby != null and createby !=''"> and 
				(t.createby = #{createby} or t.roleid in (select 
																						    dr.roleid
																						from
																						    aos_user_duty ud
																						        inner join
																						    aos_duty_role dr ON ud.dutyid = dr.dutyid
																						where ud.userid = #{createby})
				)
			</if>
			<if test="available != null and available !=''"> and 
				t.available = ${available}
			</if>
			<if test="remark != null and remark !=''"> and 
				t.remark = #{remark}
			</if>
			order by t.createdate desc
	</select>

	<select id="get" parameterType="AosRole" resultType="AosRole" >
		select 
				t.roleid, t.rolename, t.rolecode, t.identitytype, t.createdate, t.createby, t.available, t.remark
			from aos_role t 
			
			where 1 = 1  
			<if test="roleid != null and roleid !=''"> and 
				t.roleid = #{roleid}
			</if>
			<if test="rolename != null and rolename !=''"> and 
				t.rolename = #{rolename}
			</if>
			<if test="rolecode != null and rolecode !=''"> and 
				t.rolecode = #{rolecode}
			</if>
			<if test="identitytype != null and identitytype !=''"> and 
				t.identitytype = ${identitytype}
			</if>
			<if test="createdate != null and createdate !=''"> and 
				t.createdate = #{createdate}
			</if>
			<if test="createby != null and createby !=''"> and 
				t.createby = #{createby}
			</if>
			<if test="available != null and available !=''"> and 
				t.available = ${available}
			</if>
			<if test="remark != null and remark !=''"> and 
				t.remark = #{remark}
			</if>
	</select>

	<insert id="insert" parameterType="AosRole">
		insert into aos_role
			(roleid 
		<if test="rolename != null and rolename !=''"> , rolename</if>
		<if test="rolecode != null and rolecode !=''"> , rolecode</if>
		<if test="identitytype != null and identitytype !=''"> , identitytype</if>
		<if test="createdate != null and createdate !=''"> , createdate</if>
		<if test="createby != null and createby !=''"> , createby</if>
		<if test="available != null and available !=''"> , available</if>
		<if test="remark != null and remark !=''"> , remark</if>
		)
		values 			(#{roleid} 
		<if test="rolename != null and rolename !=''"> , #{rolename}</if>
		<if test="rolecode != null and rolecode !=''"> , #{rolecode}</if>
		<if test="identitytype != null and identitytype !=''"> , ${identitytype}</if>
		<if test="createdate != null and createdate !=''"> , #{createdate}</if>
		<if test="createby != null and createby !=''"> , #{createby}</if>
		<if test="available != null and available !=''"> , ${available}</if>
		<if test="remark != null and remark !=''"> , #{remark}</if>
		)

	</insert>

	<update id="update" parameterType="AosRole">
		update aos_role 
			set roleid   = #{roleid}

				<if test="rolename != null and rolename !=''"> , rolename = #{rolename}</if>
				<if test="rolecode != null and rolecode !=''"> , rolecode = #{rolecode}</if>
				<if test="identitytype != null and identitytype !=''"> , identitytype = ${identitytype}</if>
				<if test="createdate != null and createdate !=''"> , createdate = #{createdate}</if>
				<if test="createby != null and createby !=''"> , createby = #{createby}</if>
				<if test="available != null and available !=''"> , available = ${available}</if>
				<if test="remark != null and remark !=''"> , remark = #{remark}</if>
		where roleid = #{roleid}
	</update>

	<delete id="delete" parameterType="AosRole">
		delete from aos_role  where roleid = #{roleid}
	</delete>

</mapper>
